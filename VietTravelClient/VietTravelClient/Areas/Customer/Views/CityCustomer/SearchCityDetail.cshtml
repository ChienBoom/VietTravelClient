@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    @using VietTravelClient.Models.WeatherModel;
    ViewData["Title"] = "Chi tiết Thành phố";
    City city = (City)ViewData["City"];
    List<Tour> tours = (List<Tour>)ViewData["Tours"];
    List<Evaluate> evaluates = (List<Evaluate>)ViewData["Evaluates"];
    string usernameAccount = (string)ViewData["UsernameAccount"];
    int currentPage = (int)ViewData["CurrentPage"];
    int totalPage = (int)ViewData["TotalPage"];
    WeatherOpen weatherOpen = (WeatherOpen)ViewData["Weather"];
}
<style>
    .d-flex-icon {
        display: flex;
        align-items: center;
        column-gap: 0.3rem;
    }
</style>
<body>
    <div class="row" style="margin-top: 20px;">
        <div class="col-6 col-sm-6 col-md-6">
            <div class="row">
                <div class="col-12 col-sm-12 col-md-12 text-info font-weight-bold" style="font-size: 30px; padding-left: 50px;">
                    <img src="~/Icon/logo.jpg" alt="" style="width:100px; height:100px">
                    VIET TRAVEL
                </div>
                <div class="col-12 col-sm-12 col-md-12 text-info font-italic" style="padding-left: 50px; font-size: 25px;">
                    @city.Name
                </div>
                <div class="col-12 col-sm-12 col-md-12 text-info font-italic" style="padding-left: 50px;">
                    @city.TitleIntroduct
                </div>
                <div class="col-12 col-sm-12 col-md-12 font-italic" style="padding-left: 50px; margin-top: 20px;">
                    @city.ContentIntroduct
                </div>
                <div class="col-12 col-sm-12 col-md-12 font-italic" style="padding-left: 50px; margin-top: 20px;">
                    Nhiệt độ hiện tại: @weatherOpen.Main.Temp
                    Nhiệt độ cảm nhận được: @weatherOpen.Main.Feels_like
                    Độ ẩm: @weatherOpen.Main.Humidity
                    Nhiệt độ tối đa: @weatherOpen.Main.Temp_max
                    Nhiệt độ tối thiểu: @weatherOpen.Main.Temp_min
                    Tầm nhìn: @weatherOpen.Visibility
                    Tốc độ gió: @weatherOpen.Wind.Speed
                    Hướng gió:@weatherOpen.Wind.Deg
                    Gios mạnh nhất: @weatherOpen.Wind.Gust
                    Măt trời mọc: @weatherOpen.Sys.Sunrise
                    Mặt trời lặn: @weatherOpen.Sys.Sunset
                </div>
            </div>
        </div>
        <div class="col-6 col-sm-6 col-md-6">
            <div id="mycarousel" class="carousel slide carousel-fade row rounded" data-ride="carousel">
                <ol class="carousel-indicators">
                    <li data-target="#mycarousel" data-slide-to="0" class=""></li>
                    <li data-target="#mycarousel" data-slide-to="1" class="active"></li>
                    <li data-target="#mycarousel" data-slide-to="2" class=""></li>
                </ol>
                <div class="carousel-inner col-12">
                    <div class="carousel-item active">
                        <img class="d-block col-12 col-sm-12 col-md-12" style="height:550px;"
                             src="~/UploadImage/@(city.Pictures)">
                        <div class="carousel-caption d-none d-md-block">
                            <h5>@city.Name</h5>
                            <p>@city.TitleIntroduct</p>
                        </div>
                    </div>
                    <div class="carousel-item ">
                        <img class="d-block col-12 col-sm-12 col-md-12" style="height:550px;"
                             src="~/UploadImage/@(city.Pictures)">
                        <div class="carousel-caption d-none d-md-block">
                            <h5>@city.Name</h5>
                            <p>@city.TitleIntroduct</p>
                        </div>
                    </div>
                    <div class="carousel-item">
                        <img class="d-block col-12 col-sm-12 col-md-12" style="height:550px;"
                             src="~/UploadImage/@(city.Pictures)">
                        <div class="carousel-caption d-none d-md-block">
                            <h5>@city.Name</h5>
                            <p>@city.TitleIntroduct</p>
                        </div>
                    </div>
                    <a class="carousel-control-prev" href="#mycarousel" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span> <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#mycarousel" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span> <span class="sr-only">Next</span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div class="row" style="margin-top: 20px;">
        <div class="col-12 col-sm-12 col-md-12">
            <div style="display: flex; flex-wrap: wrap;">
                @{
                    foreach (Tour tour in tours)
                    {
                        <div class="col-3 col-sm-3 col-md-3" style="margin-bottom:20px;">
                            <div class="card">
                                <div>
                                    <img class="card-img-top" style="width: 100%; height: 300px;"
                                         src="~/UploadImage/@(tour.Pictures)" alt="">
                                </div>

                                <div class="card-body">
                                    <h5 class="card-title col-12 col-sm-12 col-md-12 text-truncate" data-toggle="tooltip" title="@tour.Name" data-placement="top">@tour.Name</h5>
                                    <p class="card-text col-12 col-sm-12 col-md-12 text-truncate" data-toggle="tooltip" title="@tour.ContentIntroduct" data-placement="top">@tour.ContentIntroduct</p>
                                    <div class="col-12 col-sm-12 col-md-12 row">
                                        <a asp-area="Customer" asp-controller="TourCustomer" asp-action="TourDetail" asp-route-itemId="@tour.Id" class="btn btn-primary col-8 col-sm-8 col-md-8">Xem Tour</a>
                                        <div class="col-4 col-sm-4 col-md-4 d-flex-icon">@tour.NumberOfEvaluate<i class="fa fa-comment" style="color: deepskyblue"></i> @tour.MediumStar<i class="fa fa-star" style="color: deepskyblue"></i></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                }
            </div>
        </div>
    </div>

    <div class="row" style="margin-top: 50px;">
        <div class="text-center col-12 col-sm-12 col-md-12 text-info font-italic font-weight-bold" style="font-size: 20px; margin-bottom: 20px;">CÁC BÌNH LUẬN NỔI BẬT</div>
        <ul class="list-unstyled col-12 col-sm-12 col-md-12">
            @{
                foreach (Evaluate item in evaluates)
                {
                    <li class="media" style="margin-left: 40px; margin-bottom: 20px; width: 90%;">
                        <img class="mx-3 rounded order-0" src="https://vapa.vn/wp-content/uploads/2022/12/anh-3d-thien-nhien-010.jpg" alt=""
                             style="width: 100px; max-height: 200px;">
                        <div class="media-body">
                            <h5 class="mt-0 text-info">@item.User.Name</h5>
                            <!-- <h6 class="mt-0 text-info">(linhnh@gmail.com)</h6> -->
                            <p>
                                @item.Content
                            </p>
                        </div>
                    </li>
                }
            }
        </ul>
        <button class="btn btn-info" style="margin-left: 50px; width: 90%; margin-top: 10px; width: 100px;" data-toggle="modal" data-target="#commentForm">Bình luận</button>
        <button class="btn btn-info" style="margin-left: 50px; width: 90%; margin-top: 10px; width: 100px;" data-toggle="modal" data-target="#evaluateStarForm">Đánh giá</button>

        <div id="commentForm" class="modal fade" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <form asp-area="Customer" asp-controller="EvaluateCustomer" asp-action="SaveEvaluate" method="post" enctype="multipart/form-data">
                        <div class="modal-header">
                            <h4 class="modal-title">Để lại bình luận tại đây</h4>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <input type="text" name="Eva" id="Eva" value="1" hidden />
                            <input type="text" name="EvaId" id="EvaId" value="@city.Id" hidden />
                            <input type="text" name="controllerName" id="controllerName" value="CityCustomer" hidden />
                            <input type="text" name="actionName" id="actionName" value="SearchCityDetail" hidden />
                            <input type="text" name="UsernameAccount" id="UsernameAccount" value="@usernameAccount" hidden />
                            <textarea class="form-control border-info" id="Content" name="Content" rows="3"></textarea>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Hủy bỏ</button>
                            <button type="submit" class="btn btn-primary">Bình luận</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <div id="evaluateStarForm" class="modal fade" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <form asp-area="Customer" asp-controller="EvaluateCustomer" asp-action="SaveEvaluateStar" method="post" enctype="multipart/form-data">
                        <div class="modal-header">
                            <h4 class="modal-title">Để lại đánh giá tại đây</h4>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <input type="text" name="Eva" id="Eva" value="1" hidden />
                            <input type="text" name="EvaId" id="EvaId" value="@city.Id" hidden />
                            <input type="text" name="controllerName" id="controllerName" value="CityCustomer" hidden />
                            <input type="text" name="actionName" id="actionName" value="CityDetail" hidden />
                            <input type="text" name="UsernameAccount" id="UsernameAccount" value="@usernameAccount" hidden />
                            <input type="radio" name="NumberStar" value="1" id="star1" />
                            <label for="star1">1</label><i class="fa fa-star" style="color: yellow"></i><br>
                            <input type="radio" name="NumberStar" value="2" id="star2" />
                            <label for="star2">2</label><i class="fa fa-star" style="color: yellow"></i><br>
                            <input type="radio" name="NumberStar" value="3" id="star3" />
                            <label for="star3">3</label><i class="fa fa-star" style="color: yellow"></i><br>
                            <input type="radio" name="NumberStar" value="4" id="star4" />
                            <label for="star4">4</label><i class="fa fa-star" style="color: yellow"></i><br>
                            <input type="radio" name="NumberStar" value="5" id="star5" />
                            <label for="star5">5</label><i class="fa fa-star" style="color: yellow"></i><br>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Hủy bỏ</button>
                            <button type="submit" class="btn btn-primary">Đánh giá</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div class="row" style="margin-top: 80px;">
        <ul class="pagination">
            @{
                if (currentPage > 1)
                {
                    <li class="page-item" id="prePage"><a class="page-link" asp-area="Customer" asp-controller="CityCustomer" asp-action="SearchCityDetail" asp-route-itemId="@city.Id" asp-route-page="@(currentPage-1)">Trang trước</a></li>
                }
                else
                {
                    <li class="page-item" id="prePage"><a class="page-link" href="#">Trang trước</a></li>
                }
            }
            <li class="page-item"><a class="page-link" href="#">@currentPage / @totalPage</a></li>
            @{
                if (currentPage < totalPage)
                {
                    <li class="page-item" id="nextPage"><a class="page-link" asp-area="Customer" asp-controller="CityCustomer" asp-action="SearchCityDetail" asp-route-itemId="@city.Id" asp-route-page="@(currentPage+1)">Trang kế tiếp</a></li>
                }
                else
                {
                    <li class="page-item" id="nextPage"><a class="page-link" href="#">Trang kế tiếp</a></li>
                }
            }

        </ul>
    </div>
</body>